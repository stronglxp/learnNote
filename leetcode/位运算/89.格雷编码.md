#### 89. 格雷编码

#### 2022-01-09 LeetCode每日一题

链接：https://leetcode-cn.com/problems/gray-code/

标签：**位运算、数学、回溯**

> 题目

n 位格雷码序列 是一个由 2 ^ n 个整数组成的序列，其中：

- 每个整数都在范围 [0, 2 ^ n - 1] 内（含 0 和 2 ^ n - 1）
- 第一个整数是 0
- 一个整数在序列中出现 不超过一次
- 每对 相邻 整数的二进制表示 恰好一位不同 ，且
- 第一个 和 最后一个 整数的二进制表示 恰好一位不同

给你一个整数 n ，返回任一有效的 n 位格雷码序列 。

示例 1：

```java
输入：n = 2
输出：[0,1,3,2]
解释：
[0,1,3,2] 的二进制表示是 [00,01,11,10] 。

- 00 和 01 有一位不同
- 01 和 11 有一位不同
- 11 和 10 有一位不同
- 10 和 00 有一位不同
  [0,2,3,1] 也是一个有效的格雷码序列，其二进制表示是 [00,10,11,01] 。
- 00 和 10 有一位不同
- 10 和 11 有一位不同
- 11 和 01 有一位不同
- 01 和 00 有一位不同
```

示例 2：

```java
输入：n = 1
输出：[0,1]
```


提示：

- 1 <= n <= 16

> 分析

首先按题目意思，对于给定的n，返回长度为n的序列，序列中的元素值范围为[0, 2 ^ n -1]并且没有重复元素。同时相邻数字的二进制表示只有一位不同，首尾两个数的二进制表示只有一位不同。

对于n位格雷码，`gray(i) = i ^ (i >> 1)`，比如n = 3:

gray(0) = 0 ^ 0 = 0 = 00

gray(1) = 1 ^ (1 >> 1) = 01 ^ 00 = 01

gray(2) = 2 ^ (2 >> 1) = 10 ^ 01 = 11

gray(3) = 3 ^ (3 >> 1) = 11 ^ 01 = 10

> 编码

```java
class Solution {
    public List<Integer> grayCode(int n) {
        List<Integer> ans = new ArrayList<>();
        for (int i = 0; i < (1 << n); i++) {
            ans.add(i ^ (i >> 1));
        }

        return ans;
    }
}
```

![image-20220109001930443](89.格雷编码.assets/image-20220109001930443-1658772.png)